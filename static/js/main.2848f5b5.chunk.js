(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(6),r=n.n(c),s=(n(14),n(9)),i=n(2),u=n(7),l=n(8),p=new(function(){function e(t){Object(u.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(l.a)(e,[{key:"getInformationAboutUser",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"editInformationAboutUser",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})):fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"updateAvatar",value:function(e){var t=e.link;return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-23/",headers:{authorization:"a820ff32-e1e8-488c-be97-b68f912afc14","Content-Type":"application/json"}}),d=o.a.createContext(),m=n.p+"static/media/logo.b59368db.svg",b=n(0);var j=function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("img",{className:"header__logo",src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})})};var _=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,c=e.onCardDelete,r=o.a.useContext(d),s=t.owner._id===r._id,i=t.likes.some((function(e){return e._id===r._id})),u="element__button-delete ".concat(!s&&"element__button-delete_invisible"),l="element__button-like ".concat(i&&"element__button-like_active");return Object(b.jsxs)("li",{className:"element",children:[Object(b.jsx)("button",{type:"button",name:"button-delete",className:u,onClick:function(){c(t)}}),Object(b.jsx)("img",{className:"element__image",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(b.jsx)("h2",{className:"element__text",children:t.name}),Object(b.jsxs)("div",{className:"element__like",children:[Object(b.jsx)("button",{type:"button",name:"button-like",className:l,onClick:function(){a(t)}}),Object(b.jsx)("p",{className:"element__like-number",children:t.likes.length>0?t.likes.length:""})]})]})};var f=function(e){var t=e.onEditAvatar,n=e.onEditProfile,a=e.onAddPlace,c=e.onCardClick,r=e.cards,s=e.onCardLike,i=e.onCardDelete,u=o.a.useContext(d);return Object(b.jsxs)("main",{className:"content",children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsxs)("button",{type:"button",name:"button-edit-avatar",className:"profile__button-edit-avatar",onClick:t,children:[Object(b.jsx)("div",{className:"profile__edit-avatar-icon"}),Object(b.jsx)("img",{className:"profile__avatar",src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"})]}),Object(b.jsxs)("div",{className:"profile__info",children:[Object(b.jsx)("h1",{className:"profile__name",children:u.name}),Object(b.jsx)("p",{className:"profile__about",children:u.about}),Object(b.jsx)("button",{type:"button",name:"button-edit",className:"profile__button-edit",onClick:n})]}),Object(b.jsx)("button",{type:"button",name:"button-add",className:"profile__button-add",onClick:a})]}),Object(b.jsx)("section",{className:"elements",children:Object(b.jsx)("ul",{className:"elements__list",children:r.map((function(e){return Object(b.jsx)(_,{card:e,onCardClick:c,onCardLike:s,onCardDelete:i},e._id)}))})})]})};var h=function(e){var t=e.card,n=e.onClose;return Object(b.jsxs)("div",{className:"popup popup_type_figure ".concat(t?"popup_visible":""),children:[Object(b.jsxs)("figure",{className:"popup__content popup__content_type_figure",children:[Object(b.jsx)("img",{className:"popup__image",src:t?t.link:t,alt:t?t.name:t}),Object(b.jsx)("figcaption",{className:"popup__text",children:t?t.name:t})]}),Object(b.jsx)("button",{type:"button",name:"button-cancel",className:"popup__button-cancel popup__button-cancel_type_figure",onClick:n})]})};var O=function(){var e=new Date;return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e.getFullYear()," Mesto Russia"]})})};var v=function(e){var t=e.title,n=e.name,a=e.children,o=e.textButtonSubmit,c=e.isOpen,r=e.onClose,s=e.onSubmit;return Object(b.jsxs)("div",{className:"popup popup_type_form ".concat(c?"popup_visible":""),children:[Object(b.jsxs)("form",{name:n,className:"popup__content popup__content_type_form",onSubmit:s,children:[Object(b.jsx)("h2",{className:"popup__heading",children:t}),a,Object(b.jsx)("button",{type:"submit",name:"buttonSave",className:"popup__button-save",children:o})]}),Object(b.jsx)("button",{type:"button",name:"buttonCancel",className:"popup__button-cancel",onClick:r})]})};var x=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,c=o.a.useContext(d),r=o.a.useState(""),s=Object(i.a)(r,2),u=s[0],l=s[1],p=o.a.useState(""),m=Object(i.a)(p,2),j=m[0],_=m[1];return o.a.useEffect((function(){l(c.name?c.name:""),_(c.about?c.about:"")}),[c]),Object(b.jsxs)(v,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"form_edit-profile",textButtonSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:u,about:j}),n()},children:[Object(b.jsx)("input",{type:"text",name:"name",id:"name-profile-input",className:"popup__item popup__item_name",placeholder:"",minLength:"2",maxLength:"40",value:u,onChange:function(e){l(e.target.value)},required:!0}),Object(b.jsx)("span",{className:"popup__error name-profile-input-error"}),Object(b.jsx)("input",{type:"text",name:"about",id:"about-input",className:"popup__item popup__item_about",placeholder:"",minLength:"2",maxLength:"200",value:j,onChange:function(e){_(e.target.value)},required:!0}),Object(b.jsx)("span",{className:"popup__error about-input-error"})]})};var k=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,c=o.a.useContext(d),r=o.a.useRef();return o.a.useEffect((function(){r.current.value=c.avatar}),[c]),Object(b.jsxs)(v,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"form_update-avatar",textButtonSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({link:r.current.value}),n()},children:[Object(b.jsx)("input",{ref:r,type:"url",name:"link",id:"link-avatar-input",className:"popup__item popup__item_link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0}),Object(b.jsx)("span",{className:"popup__error link-avatar-input-error"})]})};var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddCard,c=o.a.useState(""),r=Object(i.a)(c,2),s=r[0],u=r[1],l=o.a.useState(""),p=Object(i.a)(l,2),d=p[0],m=p[1];return Object(b.jsxs)(v,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"form_add-element",textButtonSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,link:d}),n(),u(""),m("")},children:[Object(b.jsx)("input",{type:"text",name:"name",value:s,onChange:function(e){u(e.target.value)},id:"name-element-input",className:"popup__item popup__item_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0}),Object(b.jsx)("span",{className:"popup__error name-element-input-error"}),Object(b.jsx)("input",{type:"url",name:"link",value:d,onChange:function(e){m(e.target.value)},id:"link-input",className:"popup__item popup__item_link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(b.jsx)("span",{className:"popup__error link-input-error"})]})};var g=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=o.a.useState(!1),r=Object(i.a)(c,2),u=r[0],l=r[1],m=o.a.useState(!1),_=Object(i.a)(m,2),v=_[0],g=_[1],N=o.a.useState(null),y=Object(i.a)(N,2),S=y[0],U=y[1],P=o.a.useState({}),A=Object(i.a)(P,2),L=A[0],E=A[1],D=o.a.useState([]),T=Object(i.a)(D,2),I=T[0],B=T[1];function q(){a(!1),l(!1),g(!1),U(null)}return o.a.useEffect((function(){p.getInformationAboutUser().then((function(e){E(e)})).catch((function(e){return console.log(e)}))}),[]),o.a.useEffect((function(){p.getInitialCards().then((function(e){B(e)})).catch((function(e){return console.log(e)}))}),[]),Object(b.jsx)("div",{className:"page",children:Object(b.jsxs)(d.Provider,{value:L,children:[Object(b.jsx)(j,{}),Object(b.jsx)(f,{onEditAvatar:function(){a(!0)},onEditProfile:function(){l(!0)},onAddPlace:function(){g(!0)},onCardClick:function(e){U(e)},cards:I,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===L._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){B((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){p.deleteCard(e._id).then((function(){B((function(t){return t.filter((function(t){return t._id!==e._id}))}))})).catch((function(e){return console.log(e)}))}}),Object(b.jsx)(k,{isOpen:n,onClose:q,onUpdateAvatar:function(e){var t=e.link;p.updateAvatar({link:t}).then((function(e){E(e)})).catch((function(e){return console.log(e)}))}}),Object(b.jsx)(x,{isOpen:u,onClose:q,onUpdateUser:function(e){var t=e.name,n=e.about;p.editInformationAboutUser({name:t,about:n}).then((function(e){E(e)})).catch((function(e){return console.log(e)}))}}),Object(b.jsx)(C,{isOpen:v,onClose:q,onAddCard:function(e){var t=e.name,n=e.link;p.addCard({name:t,link:n}).then((function(e){B([e].concat(Object(s.a)(I)))})).catch((function(e){return console.log(e)}))}}),Object(b.jsx)(h,{card:S,onClose:q}),Object(b.jsx)(O,{})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.2848f5b5.chunk.js.map